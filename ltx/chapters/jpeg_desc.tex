%************************************************
\chapter{Descripción de compresión JPEG con pérdida}\label{ch:jpeg_desc}
%************************************************

\section{Historia y Descripciones Breves de los Fundamentos Matemáticos}

La Teoría de Codificación es una sub-rama de la Teoría de la Información que marcó el inicio del estudio formal de la compresión de datos. La Teoría de la Información, nacida en 1948 con la publicación del artículo de Claude E. Shannon ``A Mathematical Theory of Communication'' \citep{shannon}, gira alrededor de los conceptos de \emph{densidad de información}, \emph{entropía de información} y \emph{redundancia de información}.

La Codificación de Entropía son métodos de compresión sin pérdida de información que no toman en cuenta el contenido. Los dos métodos más populares actualmente son los Códigos de Huffman y la Codificación Aritmética.

Dos años después de la publicación de Shannon, David Huffman inventó lo que hoy conocemos como Codificación Huffman \citep{Huffman}. Los Códigos de Huffman son códigos de prefijos que minimizan la longitud de los códigos individuales. Se mantienen hasta hoy como la técnica más aprovechada en algoritmos de compresión sin pérdida.

Después de Huffman, el método más popular para reducir redundancia es la Codificación Aritmética. Es un método más sofisticado que consigue mejores resultados. Entre $5\%$ y $10\%$ según el estándar JPEG \citep{JPEGSTD}. La especificación de la compresión JPEG incluye la capacidad de utilizar codificación aritmética, pero en la práctica no tiende a ser usada. En particular, las implementaciones de código abierto no podían usar legalmente Codificación Aritmética ya que es una técnica altamente patentada \citep{jpeg_patents}.

En 1974, Nasir Ahmed publicó un artículo describiendo su Transformada de Coseno Discreta \emph{(DCT)}, por sus siglas en Inglés. La DCT es un caso particular de la transformada de Fourier, restringida a los números reales.

La compresión JPEG como casi todos la usamos se basa en códigos de Huffman y en la Transformada de Coseno Discreta.

% ============================================================
\section{Tipos de compresión}
% ============================================================

La compresión de datos puede ser \emph{con pérdida} o \emph{sin pérdida}. Una compresión sin pérdida es una función biyectiva. El dominio de la función es el espacio de datos que estamos interesados en comprimir. Los formatos de compresión sin péridida funcionan identificando información redundante y removiendo la redundancia, dejando la información intacta. La compresión con pérdida hace esto también, pero también identifica información ``inecesaria''. Dependiendo de la agresividad de la compresión, la pérdida de información puede ser desde imperceptible a inaceptable.

El formato JPEG soporta varios tipos de compresión.

\begin{list}{}{}
\item \emph{Baseline}

El tipo \emph{baseline} es el más popular y es el tipo de compresión en el que se enfoca este trabajo. Por brevedad, a menos de que se especifique lo contario, cuando el resto de este documento hable de compresión JPEG, estará hablando del tipo \emph{baseline}. La compresión está basada en la Transformada de Coseno Discreta para filtrar información innecesaria, y para reducir redundancia puede utilizar Árboles de Huffman o Codificación Aritmética.

\item \emph{Progresivo}

El tipo \emph{progresivo} es similar a \emph{baseline}, pero se le agregan propiedades deseables. La imagen se comprime en múltiples pasos, cada uno con mayor detalle. Con el método \emph{progresivo}, se puede desplegar la imágen sin que se tenga la totalidad de los datos en memoria.

La utilidad de este método es poder dibujar la imágen mientras se está descargando de Internet. Cuando se está en un entorno con ancho de banda limitado, o cuando se descarga una imágen muy grande, es de valor para el usuario poder ver versiones de la imágen progresivamente más detalladas mientras se descarga.

\item \emph{Sin pérdida}

La compresión sin pérdida fue agregada a JPEG ``por que tenían que'' y no hubo un análisis riguroso para su diseño \citep{JPEGSTD}. Aunque la compresión JPEG sin pérdida no es mala, formatos como PNG son altamente más populares y efectivos. Mucho software simplemente no soporta JPEG con compresión sin pérdida.

\item \emph{Compresión Jerárquica}

El modo jerárquico codifica la imágen en varias versiones, cada una a diferentes resoluciones. Se guarda en una estructura ``piramidal''. La primera imágen está comprimida a resolución completa, y cada imágen sucesiva se guarda a la mitad de la resolución de la anterior. Esta pirámide se guarda en memoria de imágen más pequeña a imágen más grande.

Este método es útil cuando la resolución de la imagen es muy grande, y la aplicación no necesita o no es capaz de utilizar la imagen en su tamaño completo.

\end{list}

% ============================================================
\section{Descripción de la Compresión \emph{Baseline} de JPEG}
% ============================================================

El codificador implementado en este trabajo es el \emph{Baseline JPEG}, al que también se le refiere como \emph{DCT-Based Coding}, traducido aquí como \emph{Codificación DCT}.

La codificación DCT divide a la imágen en bloques de $8\times8$ píxeles. Cada bloque de $8\times8$ pasa por una serie de transformaciones y salen secuencialmente como datos comprimidos.

El primer paso en el \emph{pipeline} es separar los componentes de la imágen. Las dos maneras más comunes de representar imágenes en computadoras es \verb+RGB+ o \verb+RGBA+: Cada píxel ocupa 32 bits de espacio, divididos en componentes de 8 bits. Cada componente corresponde a un color a al valor de opacidad, comúnmente denominado \emph{alpha}. Por tanto, \verb+RGB+ corresponde al byte \verb+RRGGBBXX+, con \verb+RR+ representando rojo, \verb+GG+ representando verde y \verb+BB+ representando azul. \verb+XX+ se usa por convención para decir que esos bits no son utilizados. De la misma manera, \verb+RGBA+ corresponde a \verb+RRGGBBAA+, donde el último byte se usa para el valor \emph{alpha}.


%%% Local Variables:
%%% mode: latex
%%% ispell-local-dictionary: "espanol"
%%% TeX-engine: xelatex
%%% TeX-master: "../tesis"
%
